{"componentChunkName":"component---src-templates-post-template-tsx","path":"/state-a-components-memory/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"tableOfContents":"<ul>\n<li><a href=\"#when-a-regular-variable-isnt-enough\">When a regular variable isn’t enough</a></li>\n<li><a href=\"#how-does-react-know-which-state-to-return\">How does React know which state to return?</a></li>\n<li><a href=\"#state-is-isolated-and-private\">State is isolated and private</a></li>\n<li><a href=\"#%EC%83%88%EB%A1%AD%EA%B2%8C-%EC%95%8C%EA%B2%8C-%EB%90%9C-%EC%A0%90\">새롭게 알게 된 점</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0\">참고</a></li>\n</ul>","timeToRead":4,"html":"<blockquote>\n<p><strong>- 주의 -</strong> <br /> 정리하면서 저의 생각도 많이 넣는 편입니다. <br /> 혹시나 제 글을 읽으실 때 아리송한 부분이 생기신다면 해당하는 공식 문서를 꼭 참고하시길 바랍니다. <br /> 또한, 저에게 익숙한 내용들은 생략하고 정리합니다.</p>\n</blockquote>\n<p>타이핑에 따라 input 태그의 값을 업데이트 시키거나, 이미지 캐러셀을 클릭하면 다른 이미지를 보여주는 등 상호작용에 따라 화면을 바꿔줘야 할 때가 있다. 일단 이를 위해서는 컴포넌트가 현재의 input 값, 현재의 이미지 값을 저장하고 있어야 한다. 특정한 메모리, 즉 React의 컴포넌트가 무언가를 기억할 때 이 무언가를 React에서는 state라고 칭한다.</p>\n<h2 id=\"when-a-regular-variable-isnt-enough\" style=\"position:relative;\"><a href=\"#when-a-regular-variable-isnt-enough\" aria-label=\"when a regular variable isnt enough permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>When a regular variable isn’t enough</h2>\n<p>다음과 같이 코드를 작성하면 index가 바뀌어도 우리가 예상한대로는 동작하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> sculptureList <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./data.js'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Gallery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    index <span class=\"token operator\">=</span> index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">let</span> sculpture <span class=\"token operator\">=</span> sculptureList<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleClick<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Next</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>i</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>sculpture<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token plain-text\"> </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>i</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        by </span><span class=\"token punctuation\">{</span>sculpture<span class=\"token punctuation\">.</span>artist<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        (</span><span class=\"token punctuation\">{</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\"> of </span><span class=\"token punctuation\">{</span>sculptureList<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">}</span><span class=\"token plain-text\">)\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sculpture<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>sculpture<span class=\"token punctuation\">.</span>alt<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>sculpture<span class=\"token punctuation\">.</span>description<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그저 지역 변수를 변화시키는 것 뿐이기 때문이다. 화면을 바꾸기 위해 지역 변수를 사용하면 무엇이 문제일까? React에서는 다음과 같은 문제가 생긴다.</p>\n<ul>\n<li>렌더링 사이에 지역 변수는 유지되지 않는다. 즉 index를 0에서 1로 바꾸었더라도 지역 변수이면 다음 렌더링에서 1이 아니라 0으로 남아있다.</li>\n<li>지역 변수를 바꾼다고 해서 렌더링을 트리거하지 않는다. React에서는 바뀐 지역 변수를 새로운 데이터로 인식하지 않기 때문에 렌더링이 트리거되지 않는다.</li>\n</ul>\n<p>즉 다음 2가지가 필요하다.</p>\n<ul>\n<li>렌더링 사이에 데이터가 유지되어야 한다. 즉 렌더링 되면 바뀐 데이터로 유지되어야 한다.</li>\n<li>데이터가 바뀌면 렌더링이 트리거 되어야 한다.</li>\n</ul>\n<p>이를 위해 React에서 사용할 수 있는 것은 <code class=\"language-text\">useState</code> 라는 Hook이다. 이 useState는 다음 2가지를 제공한다.</p>\n<ul>\n<li>렌더링 사이에도 유지되는 state 변수</li>\n<li>state를 업데이트하고 컴포넌트 렌더링을 트리거할 수 있는 setter 함수</li>\n</ul>\n<p>다음과 같이 사용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// state 생성</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">,</span> setIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// index 업데이트 하기</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleClick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setIndex</span><span class=\"token punctuation\">(</span>index <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>useState를 보면 앞에 use라는 prefix가 붙는 것을 볼 수 있다. 이렇게 앞에 use가 붙으면 React에서는 이를 Hook으로 인식한다. 이러한 Hook은 컴포넌트의 최상단에서 호출되어야 한다. 조건문 안에 들어가 최상단이 아닌 곳에서 불려지면 경고가 뜬다. <a href=\"https://velog.io/@metamong/Closure-on-React-Hooks#closure-on-usestate-useeffect\" target=\"_blank\" rel=\"nofollow\">이와 관련하여 이전에 velog에 쓴 글</a>이 있다. 어쨋든 우리는 컴포넌트에서 Hook을 마치 import문처럼 최상단에서 사용해야 한다. 그렇지 않으면 어떻게 되는지 요약하자면 useState, useEffect 등의 Hook들이 자신의 원래 공간을 못 찾아갈 수 있다. 컴포넌트에서 useState와 useEffect 등으로 선언한 값들은 컴포넌트의 어떤 배열에 저장된다. 이 Hook들은 매번 렌더링 시 배열에서 자신이 차지하고 있는 공간으로 찾아가기 위해 index를 가지고 있다. 매번 렌더링 시 조건문에 의해 어떤 Hook은 호출되고 어떤 Hook은 호출되지 않는다면 index가 꼬여서 제대로 찾아갈 수 없다. 나는 <a href=\"https://www.youtube.com/watch?v=KJP1E-Y-xyo\" target=\"_blank\" rel=\"nofollow\">이 영상</a>을 보고 이를 이해하게 되었다.</p>\n<h2 id=\"how-does-react-know-which-state-to-return\" style=\"position:relative;\"><a href=\"#how-does-react-know-which-state-to-return\" aria-label=\"how does react know which state to return permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How does React know which state to return?</h2>\n<p>방금 말한 내용과 어느 정도 일맥상통하는 내용이다. React 공식 문서에서 이걸 얘기해줄 줄은 몰랐다.</p>\n<p>useState로 state를 선언할 때 우리가 따로 key와 같은 identifier를 넣어 주지 않는다. 그렇다면 재렌더링 시, 즉 함수가 재호출될 때 마다 어떻게 저장된 값을 가지고 올까? 따로 엄청난 마법이 있는 것이 아니라, 이해할 수 있는 조금은 단순한 개념을 사용한다는 것만 일단 알아두자.</p>\n<p>하지만 그 단순한 개념을 적용시키기 위해서 알아두어야 할 것은 useState와 같은 Hook들은 컴포넌트 함수의 최상단에서 호출되어야 한다는 것이다. if문 안에서 호출되는 등 최상단이 아닌 곳에서 호출되면 안된다. 간혹 이러한 주의점을 놓칠 것 같다면 <a href=\"https://www.npmjs.com/package/eslint-plugin-react-hooks\" target=\"_blank\" rel=\"nofollow\">eslint-plugin-react-hooks</a>라는 플러그인을 사용하면 된다.</p>\n<p>이제 내부적으로 어떻게 Hook들이 재호출되더라도 본인의 값을 유지한 채 사용할 수 있는지 알아보자. 각 컴포넌트는 Hook과 대응되는 배열을 가지고 있다. 그리고 Hook에 매칭되는 배열 안의 값을 매칭시키기 위한 포인터(앞으로 cursor라고 하겠다) 또한 가지고 있다. 이에 대해 나 또한 <a href=\"https://velog.io/@metamong/Closure-on-React-Hooks#closure-on-usestate-useeffect\" target=\"_blank\" rel=\"nofollow\">동영상과 여러 아티클들을 참고해 글</a>을 작성한 적이 있다. 영어로 적혀져 있지만 보다 자세한 글은 <a href=\"https://medium.com/@ryardley/react-hooks-not-magic-just-arrays-cd4f1857236e\" target=\"_blank\" rel=\"nofollow\">이 글</a>을 확인하면 좋을 것 같다.</p>\n<p>읽기 귀찮을 수 있다. 감히 내가 요약해보겠다. 다음과 같은 코드가 있다고 가정하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Component</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> setNumber<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'useEffect'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Current Number: </span><span class=\"token punctuation\">{</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setNumber</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">number</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Component<span class=\"token punctuation\">;</span></code></pre></div>\n<p>지금 여기서 사용된 훅은 useState, useEffect 2개인 점을 인지하자. 그리고 useState는 1번 째, useEffect는 2번 째로 선언되었다. 그렇다면 대략 다음과 같이 Component는 Hook을 기억하기 위해 배열과 cursor를 가지게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> componentHooks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> cursor <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그리고 useState와 useEffect는 대략 다음과 같은 모습을 띈다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> componentHooks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> cursor <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useState</span> <span class=\"token operator\">=</span> initState <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> storedValue <span class=\"token operator\">=</span> componentHooks<span class=\"token punctuation\">[</span>cursor<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> currentCursor <span class=\"token operator\">=</span> cursor<span class=\"token punctuation\">;</span> <span class=\"token comment\">// cursor는 다음 Hook들이 호출될 때마다 증가함으로, componentHooks에서 자신의 위치를 기억하려면 미리 저장해놔야 한다.</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">setState</span> <span class=\"token operator\">=</span> nextState <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    componentHooks<span class=\"token punctuation\">[</span>currentCursor<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> nextState<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">updateDOM</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// React가 알아서 변경된 부분을 찾아 DOM을 변경하고 화면을 업데이트한다.</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 첫 번째 호출이 아니라면 이미 저장되어 있는 값을 반환하면 된다.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>storedValue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    cursor <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>storedValue<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// 첫 번째 호출이라면 초깃값을 할당한다.</span>\n  componentHooks<span class=\"token punctuation\">[</span>cursor<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> initState<span class=\"token punctuation\">;</span>\n  cursor <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">[</span>initState<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> useEffect <span class=\"token operator\">=</span> <span class=\"token operator\">...</span></code></pre></div>\n<p>useEffect까진 작성하지 않았다. 하지만 여기서 알아야 할 부분은 useState가 componentHooks에서 0번째 자리를 차지하고, useEffect는 1번째 자리를 차지한다는 것이다. 각자 호출되면 cursor를 +1해서 다음 Hook이 사용할 수 있도록 준비해준다. 이를 통해 저장된 값들을 가지고 올 수 있다. 이 cursor는 Component가 호출될 때 0으로 초기화시켜주니 무한히 증가할 것 같은 의문은 없애도 된다. 어쨋든 호출되는 순서에 맞게 componentHooks에 저장된다. 만약 조건문으로 어떤 것은 호출되고 어떤 것은 때때로 호출되지 않는다면 매칭되는 순서가 꼬여서 Hook들이 componentHooks로부터 제대로 된 자신의 값을 가지고 올 수 없을 것이다.</p>\n<h2 id=\"state-is-isolated-and-private\" style=\"position:relative;\"><a href=\"#state-is-isolated-and-private\" aria-label=\"state is isolated and private permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State is isolated and private</h2>\n<p>state는 독립적이다. useState를 사용하는 컴포넌트를 똑같이 3번 렌더링해도 각자 다른 state를 가지게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Component</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Component</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> setNumber<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setNumber</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">number</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">증가</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App<span class=\"token punctuation\">;</span></code></pre></div>\n<p>위와 같이 작성하고 첫 번째 컴포넌트의 버튼을 클릭하면 3개의 컴포넌트가 모두 증가하는 것이 아니라, 첫 번째 컴포넌트의 number만 증가한다.</p>\n<h2 id=\"새롭게-알게-된-점\" style=\"position:relative;\"><a href=\"#%EC%83%88%EB%A1%AD%EA%B2%8C-%EC%95%8C%EA%B2%8C-%EB%90%9C-%EC%A0%90\" aria-label=\"새롭게 알게 된 점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>새롭게 알게 된 점</h2>\n<ul>\n<li>useState를 타고 들어가보면 다음과 같이 초깃값으로 콜백 함수를 받을 수 있는 것을 확인할 수 있다. 즉 콜백 함수가 실행되어 반환된 값을 초깃값으로 설정할 수도 있다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 615px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2c7a15f238b0dea16a64e2665b95f232/8ab79/usestate-type.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 3.6458333333333335%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASUlEQVR42h3FyQ2AMAwAQWpBMWCZBHJHHP2XtUjMZ6beI+9TiDFxhpNWD8aI3FfGwo6oYjbjVHEW0M1YvUdaQmrClfK/tIzUzAfZVh7vLewBFgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2c7a15f238b0dea16a64e2665b95f232/a59e9/usestate-type.webp 192w,\n/static/2c7a15f238b0dea16a64e2665b95f232/0ca9f/usestate-type.webp 384w,\n/static/2c7a15f238b0dea16a64e2665b95f232/a6108/usestate-type.webp 615w\"\n              sizes=\"(max-width: 615px) 100vw, 615px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2c7a15f238b0dea16a64e2665b95f232/3b721/usestate-type.png 192w,\n/static/2c7a15f238b0dea16a64e2665b95f232/66595/usestate-type.png 384w,\n/static/2c7a15f238b0dea16a64e2665b95f232/8ab79/usestate-type.png 615w\"\n            sizes=\"(max-width: 615px) 100vw, 615px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2c7a15f238b0dea16a64e2665b95f232/8ab79/usestate-type.png\"\n            alt=\"useState 타입\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>value<span class=\"token punctuation\">,</span> setValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"참고\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0\" aria-label=\"참고 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고</h2>\n<p><a href=\"https://react.dev/learn/state-a-components-memory\" target=\"_blank\" rel=\"nofollow\">State: A Component’s Memory</a></p>","frontmatter":{"title":"[React 공식 문서 타파하기] State: A Component's Memory","summary":"React의 Component가 어떻게 변화되는 데이터를 화면에 반영할 수 있는지, 이 데이터는 재렌더링 시 어떻게 기억해서 가지고 올 수 있는지 알아봅니다.","date":"2023-05-17","categories":["React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABZ0lEQVR42k1RT0uXYRAcf1jsIoR6kQwJqkNCEIUShnjKUxFZHX5FFiRCfwwrOxTUqYP3oK8QfaNn9sPsbDyvr9Vh2NkHntlhBmABrFtg7YO1A9ZjtNpDq9toBbSa8RA6rIOa6Rh25sT7fvI+6RODYNMOWl0E6wtY38FaAjUFBVATD13z0LpRs8Z/4sMhZhfugsPsgtfBeg/Wb7A+oNU7tM51hFarHjlv1Btj3vXQMw9d8NBa/+yhTWeeN2rBmFse2u4OvqHVPJo+odUPtPoJ1kdQy2j1cpa65JGfjXpr1HNjHhpzz6g7xtx36rWHXhhzxUNbJw5bHaLVL7AOwHoFdj4cuOqRixbaNeqRUfeNeWDMTaPuGXM6ut415pqHbmAMvhdxBa2+gnUM1jKoJz3DM9RZC82NwS96aMlDlz00MeaqMRcs5Ma8acxzGFteB+spWA/AeohWU7TaOG3Z/oY/FnHa+ljI//wPSsAgQPycdAsAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/4ade5cac5aba1b2a6129e12ce9a93deb/debc3/react-logo.png","srcSet":"/static/4ade5cac5aba1b2a6129e12ce9a93deb/e6d27/react-logo.png 1250w,\n/static/4ade5cac5aba1b2a6129e12ce9a93deb/f4108/react-logo.png 2500w,\n/static/4ade5cac5aba1b2a6129e12ce9a93deb/debc3/react-logo.png 5000w","sizes":"(min-width: 5000px) 5000px, 100vw"},"sources":[{"srcSet":"/static/4ade5cac5aba1b2a6129e12ce9a93deb/55a90/react-logo.webp 1250w,\n/static/4ade5cac5aba1b2a6129e12ce9a93deb/a9708/react-logo.webp 2500w,\n/static/4ade5cac5aba1b2a6129e12ce9a93deb/f1cef/react-logo.webp 5000w","type":"image/webp","sizes":"(min-width: 5000px) 5000px, 100vw"}]},"width":5000,"height":1679}},"publicURL":"/static/4ade5cac5aba1b2a6129e12ce9a93deb/react-logo.png"}}}}]}},"pageContext":{"slug":"/state-a-components-memory/","previousPost":{"title":"내가 모르는 것들","slug":"/things-i-dont-know/"},"nextPost":{"title":"[React 공식 문서 타파하기] Render and Commit","slug":"/render-and-commit/"}}},"staticQueryHashes":[],"slicesMap":{}}